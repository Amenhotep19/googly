{"version":3,"sources":["webpack:///./src/Thumb.js","webpack:///./src/Example.js","webpack:///./src/instructions.md","webpack:///./src/index.js","webpack:///./src/App.js"],"names":["Wrapper","__WEBPACK_IMPORTED_MODULE_2_styled_components__","div","_templateObject","Face","_templateObject2","Eye","_templateObject3","Mouth","_templateObject4","Thumb","_imgRef","img","_this","_faceRef","face","_mouthRef","mouth","_leftEyeRef","leftEye","_wrapperRef","wrapper","_rightEyeRef","rightEye","componentDidMount","_this2","this","reader","FileReader","faceDetector","FaceDetector","onloadend","__WEBPACK_IMPORTED_MODULE_0__home_joao_wm_github_googly_node_modules_babel_runtime_regenerator___default","a","mark","_callee","wrap","_context","prev","next","src","result","detect","sent","forEach","_face$boundingBox","boundingBox","top","left","width","height","style","cssText","landmarks","landmark","index","_landmark$location","location","x","y","type","css","stop","readAsDataURL","props","file","render","_props","__WEBPACK_IMPORTED_MODULE_1_react___default","createElement","innerRef","alt","name","ref","__WEBPACK_IMPORTED_MODULE_1_react__","SUPPORTED","Files","__WEBPACK_IMPORTED_MODULE_1_styled_components__","__WEBPACK_IMPORTED_MODULE_0_react___default","Example","state","files","_handleUpload","event","Array","from","target","filter","ext","split","pop","includes","setState","onChange","multiple","_ref","map","__WEBPACK_IMPORTED_MODULE_2__Thumb__","key","_ref2","__WEBPACK_IMPORTED_MODULE_0_react__","module","exports","Object","injectGlobal","__WEBPACK_IMPORTED_MODULE_1_react_dom__","__WEBPACK_IMPORTED_MODULE_3__App__","document","querySelector","Container","Inner","__WEBPACK_IMPORTED_MODULE_1_react_markdown___default","source","__WEBPACK_IMPORTED_MODULE_4__instructions_md___default","__WEBPACK_IMPORTED_MODULE_3__Example__","App","isEnabled","window","content","__webpack_exports__"],"mappings":"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","file":"app.e57273c3.js","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  z-index: 5;\n  position: relative;\n`;\n\nconst Face = styled.div`\n  position: absolute;\n  border: 1px solid yellow;\n`;\n\nconst Eye = styled.div`\n  position: absolute;\n  border: 1px solid blue;\n`;\n\nconst Mouth = styled.div`\n  position: absolute;\n  border: 1px solid orange;\n`;\n\nexport default class Thumb extends Component {\n  _imgRef = img => (this.img = img);\n  _faceRef = face => (this.face = face);\n  _mouthRef = mouth => (this.mouth = mouth);\n  _leftEyeRef = leftEye => (this.leftEye = leftEye);\n  _wrapperRef = wrapper => (this.wrapper = wrapper);\n  _rightEyeRef = rightEye => (this.rightEye = rightEye);\n\n  componentDidMount() {\n    const reader = new FileReader();\n    const faceDetector = new FaceDetector();\n\n    reader.onloadend = async () => {\n      this.img.src = reader.result;\n      const faces = await faceDetector.detect(this.img);\n\n      faces.forEach(face => {\n        const { top, left, width, height } = face.boundingBox;\n\n        this.wrapper.style.cssText = `\n            width: ${width}px;\n            height: ${height}px;\n            top: ${top}px;\n            left: ${left}px;\n        `;\n\n        face.landmarks.forEach((landmark, index) => {\n          const { x, y } = landmark.location;\n\n          switch (landmark.type) {\n            case \"eye\":\n              const css = `\n                    width: 35%;\n                    height: 35%;\n                    top: ${y - top}px;\n                    left: ${x - left}px;\n                `;\n\n              if (index === 0) {\n                this.leftEye.style.cssText = css;\n              } else {\n                this.rightEye.style.cssText = css;\n              }\n              break;\n            case \"mouth\":\n              this.mouth.style.cssText = `\n                    width: 50%;\n                    height: 20%;\n                    top: ${y - top}px;\n                    left: ${x - left}px;\n                `;\n              break;\n          }\n        });\n      });\n    };\n\n    reader.readAsDataURL(this.props.file);\n  }\n\n  render() {\n    const { file, index } = this.props;\n\n    return (\n      <Wrapper innerRef={this._wrapperRef}>\n        <img width={300} height={300} alt={file.name} ref={this._imgRef} />\n        <Face innerRef={this._faceRef} />\n        <Eye innerRef={this._leftEyeRef} />\n        <Eye innerRef={this._rightEyeRef} />\n        <Mouth innerRef={this._mouthRef} />\n      </Wrapper>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Thumb.js","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nimport Thumb from \"./Thumb\";\n\nconst SUPPORTED = [\"jpg\", \"gif\", \"png\", \"jpeg\"];\n\nconst Files = styled.div`\n  display: flex;\n  justify-content: space-evenly;\n`;\n\nexport default class Example extends Component {\n  state = {\n    files: []\n  };\n\n  _handleUpload = event => {\n    const files = Array.from(event.target.files).filter(file => {\n      const ext = file.name.split(\".\").pop();\n\n      return SUPPORTED.includes(ext);\n    });\n\n    this.setState({ files });\n  };\n\n  render() {\n    return (\n      <div>\n        <input type=\"file\" onChange={this._handleUpload} multiple />\n\n        <hr />\n\n        <Files>\n          {this.state.files.map((file, index) => (\n            <Thumb key={`thumb-${index}`} file={file} index={index} />\n          ))}\n        </Files>\n\n        <hr />\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Example.js","module.exports = \"# Looks like you still haven't activated the FaceDetector API\\n\\n## Follow these instructions\\n\\n### Copy and paste this into a new tab\\n\\n```shell\\nchrome://flags/#enable-experimental-web-platform-features\\n```\\n\\n### And enable the experimental web platform features\\n\\n![enabling the api](src/0.png)\\n\\n### After enabling it you should see a **Relaunch Now** button on the bottom of the screen.\\n\\n![relaunch chrome](src/1.png)\\n\\n### Relaunch the browser please.\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/instructions.md\n// module id = ZW1U\n// module chunks = 1","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { injectGlobal } from \"styled-components\";\n\nimport App from \"./App\";\n\ninjectGlobal`\n    * { box-sizing: border-box; font-family: 'Roboto', sans-serif; }\n    body { \n        margin: 0; \n        background: #76b852; \n        background: linear-gradient(to left, #76b852, #8DC26F); \n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: antialiased;\n    }\n`;\n\nrender(<App />, document.querySelector(\"#app\"));\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import React, { Component } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport styled from \"styled-components\";\n\nimport Example from \"./Example\";\n\nimport instructions from \"./instructions.md\";\n\nconst Container = styled.div`\n  width: 55%;\n  margin: auto;\n  padding: 8% 0 0;\n`;\n\nconst Inner = styled.div`\n  z-index: 1;\n  width: 100%;\n  padding: 45px;\n  background: white;\n  position: relative;\n  margin: 0 auto 100px;\n  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);\n`;\n\nclass App extends Component {\n  state = {\n    isEnabled: false\n  };\n\n  componentDidMount() {\n    if (typeof window.FaceDetector === \"undefined\") {\n      return;\n    }\n\n    this.setState({ isEnabled: true });\n  }\n\n  render() {\n    let content = null;\n\n    if (!this.state.isEnabled) {\n      content = <ReactMarkdown source={instructions} />;\n    } else {\n      content = <Example />;\n    }\n\n    return (\n      <Container>\n        <Inner>{content}</Inner>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.js"],"sourceRoot":""}